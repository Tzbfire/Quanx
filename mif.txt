/*************************************

é¡¹ç›®åç§°ï¼šNicegram(å…¼å®¹æ–°è€æ—§ç‰ˆ)
ä¸‹è½½åœ°å€ï¼šhttps://t.cn/A6ou0MCe
æ›´æ–°æ—¥æœŸï¼š2023-11-30
è„šæœ¬ä½œè€…ï¼šchxm1023
ç”µæŠ¥é¢‘é“ï¼šhttps://t.me/chxm1023
ä½¿ç”¨å£°æ˜ï¼šâš ï¸ä»…ä¾›å‚è€ƒï¼ŒğŸˆ²è½¬è½½ä¸å”®å–ï¼
ç‰ˆæœ¬1.4.6ä¸€æ¬¡æ€§è§£é”ï¼šæ‰“å¼€APP â†’ è®¾ç½® â†’ é€‰æ‹©ç™½è‰²Nicegram â†’ å¾€ä¸‹æ‹‰æ‰¾åˆ°ã€æ¢å¤è´­ä¹°ã€‘
ç‰ˆæœ¬1.4.7éä¸€æ¬¡æ€§è§£é”ï¼šæ‰“å¼€APP â†’ åŠ©æ‰‹ â†’ ç‚¹å‡»ã€é‡Šæ”¾æ‚¨çš„Nicegramç‰¹æƒã€‘ä¹‹åå…³é—­APPï¼Œé‡æ–°æ‰“å¼€å³å¯

**************************************

[rewrite_local]
^https:\/\/www\.mc1of\.xyz:20000\/myapi\/$ url script-response-body https://raw.githubusercontent.com/Tzbfire/Quanx/main/mif.txt
[mitm]
hostname = www.mc1of.xyz


*************************************/
let body = $response.body;

try {
    let obj = JSON.parse(body);
    if (obj && Array.isArray(obj.result)) {
        for (let i = 0; i < obj.result.length; i++) {
            // å°† enable å­—æ®µçš„å€¼ä¿®æ”¹ä¸º 100
            if (obj.result[i].hasOwnProperty('enable')) {
                obj.result[i].enable = 100;
            }
        }
        $done({ body: JSON.stringify(obj) });
    } else {
        console.log("Invalid JSON structure");
        $done({});
    }
} catch (error) {
    console.log("Error parsing JSON:", error.message);
    $done({});
}
